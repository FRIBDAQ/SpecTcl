<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
	<title>presentation.html</title>
	<meta name="generator" content="BBEdit 6.5.2">
</head>
<body>
<h1>Presentation of the TreeParameter and TreeVariable classes.</h1>
<p align=justify>
<spacer type=horizontal size=50>The TreeParameter class provides a mean to implement parameters in SpecTcl in a tree-like structure and without the need to specify parameter ids.  The parameters are referred to by their names only, which at the same time indicate their location in the tree.  This reference mechanism is valid for both the coding part of SpecTcl (C++ code) and the interpreter part (Tcl/Tk shell). It eliminates the confusion induced by the use of numerals to refer to the parameters.  In addition the TreeParameter class allows the user to define parameters in meaningful units, rather than just channel numbers.  These definitions can be modified dynamically while running SpecTcl, hence giving great flexibility for the user to vary the scale of the parameters.
</p>
<p align=justify>
<spacer type=horizontal size=50>Most detector ensembles or complex devices can be easily represented by a tree-like structure.  The top (or root depending on the growth direction) of the tree is usually the name of the device itself.  Then each component of the device can be represented as branches of the tree containing themselves other branches and so on.  The immediate advantage of this technique is that the name of any part of the tree is meaningful and shows its location in the tree.  An example of an excerpt of such a tree is shown in the figure below.
</p>
<p align=justify>
<img src="pics/tree.jpg" alt="Example of a tree" id="tree" width="50%" height="50%" align="right">
<spacer type=horizontal size=50>In this example the TreeParameter s800.fp.ic.de.02 represents the second channel of the energy loss measurement from the ion chamber detector located in the focal plane of the S800 Spectrograph.  In the C++ code of SpecTcl, this parameter name can be used directly on either side of any assignment.  The TreeParameter class uses its internal scaling to map the value in units to an integer passed to the histogrammer for producing a spectrum, hence in effect binning the data depending on the number of bits declared.  This method greatly simplifies the coding since the TreeParameters are homogeneous to doubles and can be directly assigned values in meaningful units.
</p>
<p>
The TreeVariable class is built on the same principles as the TreeParameter class.  TreeVariables are also organized in a tree-like structure which can be either separate from or embedded in a TreeParameter structure.  They are typically used for calibrations, pedestals, switches or any purpose requiring the possibility to vary a value dynamically in SpecTcl.  Each C++ TreeVariable is linked to a Tcl variable with the same name.  The user has then full flexibility to either read or set the C++ TreeVariable from the Tcl/Tk shell using the <code>set</code> Tcl command.
</p>
</body>
</html>
